<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Visual Analytics</title>
        <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
        <link href="css/custombootstrap.css" rel="stylesheet">
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            body {
                font: 10px sans-serif;
            }
            .axis path,
            .axis line {
                fill: none;
                stroke: #000;
                shape-rendering: crispEdges;
            }

            .bar {
                fill: orange;
            }

            .bar:hover {
                fill: orangered ;
            }

            .x.axis path {
                display: none;
            }

            .d3-tip {
                line-height: 1;
                font-weight: bold;
                padding: 12px;
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
                border-radius: 2px;
            }

            /* Creates a small triangle extender for the tooltip */
            .d3-tip:after {
                box-sizing: border-box;
                display: inline;
                font-size: 10px;
                width: 100%;
                line-height: 1;
                color: rgba(0, 0, 0, 0.8);
                content: "\25BC";
                position: absolute;
                text-align: center;
            }

            /* Style northward tooltips differently */
            .d3-tip.n:after {
                margin: -1px 0 0 0;
                top: 100%;
                left: 0;
            }

            body {
                font: 10px sans-serif;
            }

            .arc path {
                stroke: #fff;
            }
            #demo { 
                left: 50;        
            }

        </style>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <script src="//code.jquery.com/jquery.js"></script>
        <script src="js/bootstrap.min.js"></script>

    </head>
    <body>
        <div class="navbar navbar-custom navbar-static-top ">
            <div class="container">
                <div class="navbar-brand">
                    <font color="white">Welcome, Terence Tan </font>
                    <!--	<img src="img/hugh.jpg" size="30px">-->
                </div>
                <!--
                        The below button is only supposed to work when the window is resized
                -->
                <button class="navbar-toggle" data-toggle="collapse"
                        data-target=".navHeaderCollapse">
                    <!--
                            This adds the three horizontal lines on a collapsible menu
                    -->
                    <span class="icon-bar"></span> <span class="icon-bar"></span> <span
                        class="icon-bar"></span>
                </button>

                <div class="collapse navbar-collapse navHeaderCollapse">


                    <!--Below code is needed only for IDP -->


                    <ul class="nav navbar-nav navbar-right"> 

                        <li></li>
                        <li><a href="#"> Blog </a></li>
                        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"> Manage<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Petrol</a></li>
                                <li><a href="#">Naphtha</a></li>
                                <li><a href="#">CNG</a></li>
                                <li><a href="#">LPG</a></li>
                            </ul></li>
                        <li><a href="#"> Sign Out </a></li>
                    </ul>

                </div>
            </div>
        </div>
        <script>
            function barChart(data) {
                var margin = {top: 20, right: 20, bottom: 20, left: 20};
                var width = 300;
                var height = 200;

                var formatPercent = d3.format("1");

                var x = d3.scale.ordinal()
                        .rangeRoundBands([0, width], .1);

                var y = d3.scale.linear()
                        .range([height, 0]);

                var xAxis = d3.svg.axis()
                        .scale(x)
                        .orient("bottom");

                var yAxis = d3.svg.axis()
                        .scale(y)
                        .orient("left")
                        .tickFormat(formatPercent);

                var tip = d3.tip()
                        .attr('class', 'd3-tip')
                        .offset([-10, 0])
                        .html(function(d) {
                    return "<strong>Score:</strong> <span style='color:red'>" + d.score + "</span>";
                });

                var svg = d3.select("body")
                        .append("svg")
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                        .append("g")
                        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                svg.call(tip);

                d3.tsv(data, function(error, data) {
                    x.domain(data.map(function(d) {
                        return d.letter;
                    }));
                    y.domain([0, d3.max(data, function(d) {
                            return d.score;
                        })]);

                    svg.append("g")
                            .attr("class", "x axis")
                            .attr("transform", "translate(0," + height + ")")
                            .call(xAxis);

                    svg.append("g")
                            .attr("class", "y axis")
                            .call(yAxis)
                            .append("text")
                            .attr("transform", "rotate(-90)")
                            .attr("y", 6)
                            .attr("dy", ".71em")
                            .style("text-anchor", "end")
                            .text("score");

                    svg.selectAll(".bar")
                            .data(data)
                            .enter().append("rect")
                            .attr("class", "bar")
                            .attr("x", function(d) {
                        return x(d.letter);
                    })
                            .attr("width", x.rangeBand())
                            .attr("y", function(d) {
                        return y(d.score);
                    })
                            .attr("height", function(d) {
                        return height - y(d.score);
                    })
                            .on('mouseover', tip.show)
                            .on('mouseout', tip.hide);

                });

            }

            function pieChart(data) {
                var width = 960,
                        height = 500,
                        radius = Math.min(width, height) / 2;

                var color = d3.scale.ordinal()
                        .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

                var arc = d3.svg.arc()
                        .outerRadius(radius - 10)
                        .innerRadius(0);

                var pie = d3.layout.pie()
                        .sort(null)
                        .value(function(d) {
                    return d.population;
                });

                var svg = d3.select("body").append("svg")
                        .attr("width", width)
                        .attr("height", height)
                        .append("g")
                        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

                d3.csv(data, function(error, data) {

                    data.forEach(function(d) {
                        d.population = +d.population;
                    });

                    var g = svg.selectAll(".arc")
                            .data(pie(data))
                            .enter().append("g")
                            .attr("class", "arc");

                    g.append("path")
                            .attr("d", arc)
                            .style("fill", function(d) {
                        return color(d.data.age);
                    });

                    g.append("text")
                            .attr("transform", function(d) {
                        return "translate(" + arc.centroid(d) + ")";
                    })
                            .attr("dy", ".35em")
                            .style("text-anchor", "middle")
                            .text(function(d) {
                        return d.data.age;
                    });

                });

            }

            function init() {
                d3.select("#data1")
                        .on("click", function() {
                    barChart("data/data.tsv");
                    pieChart("data/pieData.csv");
                });
                d3.select("#data2")
                        .on("click", function() {
                    barChart("data/data_1.tsv");
                    pieChart("data/pieData_1.csv");
                });
            }
        </script>


        <div id="demo">
            <div class="btn-group">
                <div class="col-md-6 col-lg-6 col-md-offset-4">
                    <h2>Visual Analytic</h2>
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        Choose One Trainee
                    </button>
                    <ul class="dropdown-menu">
                        <li><a id="data1">MA Chenguang</a></li>
                        <li><a id="data2">Phyu Phyu</a></li>
                        <li><a id="data3">Mi Mi</a></li>
                        <li><a id="data4">Nyan Tun Zaw</a></li>
                        <li><a id="data5">Aniket</a></li>
                    </ul>
                    <br>
                </div>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="svg"></svg>
        </div>

        <script type="text/javascript">
            init();
        </script>
    </body>
</html>
